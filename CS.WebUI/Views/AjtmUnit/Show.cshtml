
@{
    Layout = "~/Views/Shared/_Content.cshtml";
    var dicInfo = ViewBag.UnitInfo as Dictionary<string, string>;
}
<div class="layui-tab larryms-tab" lay-filter="AsUrl" style="height:98%">
    <ul class="layui-tab-title larryms-tab-title">
        <li class="layui-this" lay-id="AsUnit" id="tabAsUnit">单位信息</li>
        <li lay-id="AsLeader" id="tabAsLeader">领导信息</li>
    </ul>
    <div class="layui-tab-content larryms-tab-content" style="height:93%">
        <div class="layui-tab-item layui-show" style="height:100%">
            <div class="layui-btn-group">
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="Open('Edit','@dicInfo["ID"]')" title="修改(待定)"><i class="layui-icon layui-icon-edit"></i> 修改</button>
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="Open('Delete','@dicInfo["ID"]')" title="修改(待定)"><i class="layui-icon layui-icon-delete"></i> 注销</button>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>
                    单位信息
                </legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>单位名称</td>
                            <td colspan="3">@dicInfo["NAME"]</td>
                            <td>主管部门</td>
                            <td colspan="3">@dicInfo["PANRET"]</td>
                        </tr>
                        <tr>
                            <td>机构类别</td>
                            <td>@dicInfo["SETUP_TYPE"]</td>
                            <td>机构性质</td>
                            <td>@dicInfo["SETUP_NATRUE"]</td>
                            <td>机构级别</td>
                            <td>@dicInfo["SETUP_LEVEL"]</td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>经费形式</td>
                            <td>@dicInfo["OUTLAY_MODE"]</td>
                            <td>
                                行政/群团/事业
                            </td>
                            <td>@dicInfo["SETUP_RANGE"]</td>
                            <td>参公情况</td>
                            <td>@dicInfo["IS_PUBLIC"]</td>
                            <td>内设机构数</td>
                            <td>@dicInfo["DEP_NUM"]</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>
                    上下编明细
                </legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <tbody>
                        <tr>
                            <td>行政或事业上编数<span style="color:red;font-weight:bold;">(待核算)</span></td>
                            <td>@dicInfo["UP_NUM"]</td>
                            <td>行政或事业下编数<span style="color:red;font-weight:bold;">(待核算)</span></td>
                            <td>@dicInfo["DOWN_NUM"]</td>
                            <td>行政或事业正在上编<span style="color:red;font-weight:bold;">(待核算)</span></td>
                            <td>@dicInfo["UP_NUM"]</td>
                            <td>行政或事业正在下编<span style="color:red;font-weight:bold;">(待核算)</span></td>
                            <td>@dicInfo["DOWN_NUM"]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>编制情况</legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <c
                    </colgroup>
                    <thead>
                        <tr>
                            <th>编制类型</th>
                            <th>核定数</th>
                            <th>现有数</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var UnitAs = ViewBag.UnitAs as List<CS.BLL.Model.AJTM_UNIT_AS.UnitAsShow>;
                        }
                        @foreach (var item in UnitAs)
                        {
                            <tr>
                                <td>@item.TYPE</td>
                                <td>@item.VERIFICATION_NUM</td>
                                <td>@item.ACTUAL_NUM</td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>单位信息-领导/中层</legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <tr>
                        <td>内设机构领导正职核定数</td>
                        <td>@dicInfo["WITHIN_MAIN_NUM"]</td>
                        <td>内设机构领导副职核定数</td>
                        <td>@dicInfo["WITHIN_VICE_NUM"]</td>
                        <td>部门其他工作机构领导核定数</td>
                        <td>@dicInfo["OTHER_NUM"]</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>厅局级正职核定数</td>
                        <td>@dicInfo["OFFICE_MIAN_NUM"]</td>
                        <td>厅局级副职核定数</td>
                        <td>@dicInfo["OFFICE_VICE_NUM"]</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>
                            县处级正职核定数(领导)
                        </td>
                        <td>@dicInfo["COUNTY_MIAN_L"]</td>
                        <td>
                            县处级副职核定数（领导）
                        </td>
                        <td>@dicInfo["COUNTY_VICE_L"]</td>
                        <td>县处级正职核定数（中层）</td>
                        <td>@dicInfo["COUNTY_MIAN_MR"]</td>
                        <td>县处级副职核定数（中层）</td>
                        <td>@dicInfo["COUNTY_VICE_MR"]</td>
                    </tr>
                    <tr>
                        <td>乡科级正职核定数（领导）</td>
                        <td>@dicInfo["VILLAGE_MIAN_L"]</td>
                        <td>乡科级副职核定数（领导）</td>
                        <td>@dicInfo["VILLAGE_VICE_L"]</td>
                        <td>乡科级正职核定数（中层）</td>
                        <td>@dicInfo["VILLAGE_MIAN_MR"]</td>
                        <td>乡科级副职核定数（中层）</td>
                        <td>@dicInfo["VILLAGE_VICE_MR"]</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="layui-tab-item" style="height:100%">
            <div class="layui-btn-group">
                <button type="button" onclick="Open('Leader','@dicInfo["ID"]')" class="layui-btn layui-btn-primary layui-btn-sm" title="修改(待定)"><i class="layui-icon layui-icon-edit"></i> 修改</button>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>单位领导信息</legend>
            </fieldset>

            <div>
                <table class="layui-table" lay-size="sm" style="width:90%;margin:20px auto;">
                    <thead style="text-align:center">
                        <tr>
                            <th></th>
                            <th>名称</th>
                            <th>核对数</th>
                            <th>实配数</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var leaderList = ViewBag.Leader as IList<CS.BLL.Model.AJTM_LEADER.Entity>;
                            var leaderUnitList = ViewBag.leaderUnit as List<CS.BLL.Model.AJTM_LEADER_UNIT.Entity>;
                        }
                        @foreach (var item in leaderUnitList)
                        {
                            var first = leaderList.FirstOrDefault(x => x.LEADER_TYPE_ID == item.LEADER_TYPE_ID);
                            var list = leaderList.Where(x => x.LEADER_TYPE_ID == item.LEADER_TYPE_ID).ToList();

                            <tr>
                                <td rowspan="@item.NUM">@item.LEADER_TYPE</td>
                                <td>
                                    @first.LEADER_JOB
                                </td>
                                <td rowspan="@item.NUM">@item.NUM</td>
                                <td rowspan="@item.NUM">@list.Count</td>
                            </tr>

                            for (var i = 1; i < list.Count; i++)
                            {
                                <tr>
                                    <td>@list[i].LEADER_JOB</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="~/Views/AjtmUnit/JS/Show.js?v=20210610"></script>
