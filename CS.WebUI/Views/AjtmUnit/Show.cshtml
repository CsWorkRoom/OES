
@{
    Layout = "~/Views/Shared/_Content.cshtml";
    var dicInfo = ViewBag.UnitInfo as Dictionary<string, string>;
}
<style>
    .center {
        text-align: center
    }
</style>
<div class="layui-tab larryms-tab" lay-filter="AsUrl" style="height:98%">
    <ul class="layui-tab-title larryms-tab-title">
        <li class="layui-this" lay-id="AsUnit" id="tabAsUnit">单位信息</li>
        @if (ViewBag.isLeaderUnit)
        {
            <li lay-id="AsLeader" id="tabAsLeader">领导信息</li>
        }
    </ul>
    <div class="layui-tab-content larryms-tab-content" style="height:93%">
        <div class="layui-tab-item layui-show" style="height:100%">
            <div class="layui-btn-group">
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="Open('Edit','@dicInfo["ID"]')" title="修改"><i class="layui-icon layui-icon-edit"></i> 修改</button>
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="Open('Delete','@dicInfo["ID"]')" title="注销"><i class="layui-icon layui-icon-delete"></i> 注销</button>
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="Open('Remark','@dicInfo["ID"]')" title="备注"><i class="layui-icon layui-icon-edit"></i> 备注</button>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>
                    单位信息
                </legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td class="center">单位名称</td>
                            <td colspan="3">@dicInfo["NAME"]</td>
                            <td class="center">主管部门</td>
                            <td colspan="3">@dicInfo["PANRET"]</td>
                        </tr>
                        <tr>
                            <td class="center">机构类别</td>
                            <td>@dicInfo["SETUP_TYPE"]</td>
                            <td class="center">机构性质</td>
                            <td>@dicInfo["SETUP_NATRUE"]</td>
                            <td class="center">机构级别</td>
                            <td>@dicInfo["SETUP_LEVEL"]</td>
                            <td class="center">参公情况</td>
                            <td>@dicInfo["IS_PUBLIC"]</td>
                        </tr>
                        <tr>
                            <td class="center">经费形式</td>
                            <td>@dicInfo["OUTLAY_MODE"]</td>
                            <td class="center">
                                行政/群团/事业
                            </td>
                            <td>@dicInfo["SETUP_RANGE"]</td>

                            <td class="center">内设机构数</td>
                            <td>@dicInfo["DEP_NUM"]</td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>
                    上下编明细
                </legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td class="center">行政或事业<br />上编数</td>
                            <td>@dicInfo["UP_NUM"]</td>
                            <td class="center">行政或事业<br />下编数</td>
                            <td>@dicInfo["DOWN_NUM"]</td>
                            <td class="center">行政或事业<br />正在上编</td>
                            <td>@dicInfo["UP_NUM"]</td>
                            <td class="center">行政或事业<br />正在下编</td>
                            <td>@dicInfo["DOWN_NUM"]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>编制情况</legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <c
                    </colgroup>
                    <thead>
                        <tr>
                            <th>编制类型</th>
                            <th>核定数</th>
                            <th>现有数</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var UnitAs = ViewBag.UnitAs as List<CS.BLL.Model.AJTM_UNIT_AS.UnitAsShow>;
                        }
                        @foreach (var item in UnitAs)
                        {
                            <tr>
                                <td>@item.TYPE</td>
                                <td>@item.VERIFICATION_NUM</td>
                                <td>@item.ACTUAL_NUM</td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>领导职级</legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>厅局级正职</td>
                            <td>@dicInfo["OFFICE_MIAN_NUM"]</td>
                            <td>厅局级副职</td>
                            <td>@dicInfo["OFFICE_VICE_NUM"]</td>
                            <td>
                                县处级正职)
                            </td>
                            <td>@dicInfo["COUNTY_MIAN_L"]</td>
                            <td>
                                县处级副职
                            </td>
                            <td>@dicInfo["COUNTY_VICE_L"]</td>
                        </tr>
                        <tr>
                            <td>乡科级正职</td>
                            <td>@dicInfo["VILLAGE_MIAN_L"]</td>
                            <td>乡科级副职</td>
                            <td>@dicInfo["COUNTY_VICE_MR"]</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>中层职数</legend>
            </fieldset>
            <div>
                <table class="layui-table" lay-size="lg" style="width:90%;margin:20px auto;">
                    <colgroup>
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                        <col width="140" />
                        <col width="150" />
                        <col width="160" />
                        <col width="150" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>内设机构领导正职</td>
                            <td>@dicInfo["WITHIN_MAIN_NUM"]</td>
                            <td>内设机构领导副职</td>
                            <td>@dicInfo["WITHIN_VICE_NUM"]</td>
                            <td>部门其他工作机构领导</td>
                            <td>@dicInfo["OTHER_NUM"]</td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>县处级正职</td>
                            <td>@dicInfo["COUNTY_MIAN_MR"]</td>
                            <td>县处级副职</td>
                            <td>@dicInfo["COUNTY_VICE_MR"]</td>
                            <td>乡科级正职</td>
                            <td>@dicInfo["VILLAGE_MIAN_MR"]</td>
                            <td>乡科级副职</td>
                            <td>@dicInfo["VILLAGE_VICE_MR"]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="height:100px"></div>
        </div>
        @if (ViewBag.isLeaderUnit)
        {
            <div class="layui-tab-item" style="height:100%">
                <div class="layui-btn-group">
                    <button type="button" onclick="Open('Leader','@dicInfo["ID"]','@dicInfo["NAME"]')" class="layui-btn layui-btn-primary layui-btn-sm" title="初始化"><i class="layui-icon layui-icon-edit"></i> 初始化</button>
                    <button type="button" onclick="Open('LeaderAdd','@dicInfo["ID"]','@dicInfo["NAME"]')" class="layui-btn layui-btn-primary layui-btn-sm" title="初始化"><i class="layui-icon layui-icon-add"></i> 新增</button>
                </div>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend>单位领导信息</legend>
                </fieldset>
                <div>
                    <table class="layui-table" lay-size="sm" style="width:90%;margin:20px auto;">
                        <thead style="text-align:center">
                            <tr>
                                <th rowspan="2" style="text-align:center">领导职数分类</th>
                                <th colspan="2" style="text-align:center">副县级以上领导职数总计</th>
                                <th rowspan="2" style="text-align:center">领导职数名称</th>
                                <th rowspan="2" style="text-align:center">领导名称</th>
                            </tr>
                            <tr>
                                <th style="text-align:center">核对数</th>
                                <th style="text-align:center">实配数</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                var leaderList = ViewBag.Leader as IList<CS.BLL.Model.AJTM_LEADER.Entity>;
                                var leaderUnitList = ViewBag.leaderUnit as List<CS.BLL.Model.AJTM_LEADER_UNIT.Entity>;
                            }
                            @foreach (var Litem in ViewBag.LeaderType)
                            {
                                var first = leaderList.FirstOrDefault(x => x.LEADER_TYPE_ID == Litem.ID);
                                if (first == null) { continue; }
                                var list = leaderList.Where(x => x.LEADER_TYPE_ID == Litem.ID).ToList();
                                int num = 0;
                                var item = leaderUnitList.FirstOrDefault(x => x.LEADER_TYPE_ID == Litem.ID);
                                if (item != null) { num = item.NUM; }
                                var leaderjoib = "";
                                var leaderName = "";
                                if (first != null) { leaderjoib = first.LEADER_JOB; leaderName = first.LEADER_NAME; }
                                <tr>
                                    <td rowspan="@list.Count">@first.LEADER_TYPE</td>
                                    <td rowspan="@list.Count">@num</td>
                                    <td rowspan="@list.Count">@list.Where(x => x.IS_USE == 1).Count()</td>
                                    <td>
                                        @leaderjoib
                                    </td>
                                    <td>
                                        @leaderName
                                    </td>
                                </tr>
                                for (var i = 1; i < list.Count; i++)
                                {
                                    <tr>
                                        <td>@list[i].LEADER_JOB</td>
                                        <td>@list[i].LEADER_NAME</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>
</div>
<style>
    .Btable th {
        text-align: center
    }
</style>
<script src="~/Views/AjtmUnit/JS/Show.js?v=20210710"></script>
